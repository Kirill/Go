.center.icon[![otus main](https://drive.google.com/uc?id=1NPIi9Hw5ZjA5SK24lTXckDjNAPSuFAHi)]

---


class: white
background-image: url(tmp/title.svg)
.top.icon[![otus main](https://drive.google.com/uc?id=18Jw9bQvL3KHfhGWNjqyQ3ihR3fV3tmk8)]

# Оптимизация и профилирование

### Иван Ремень

---

class: top white
background-image: url(tmp/sound.svg)
background-size: 130%
.top.icon[![otus main](https://drive.google.com/uc?id=18Jw9bQvL3KHfhGWNjqyQ3ihR3fV3tmk8)]

.sound-top[
  # Как меня слышно и видно?
]

.sound-bottom[
  ## > Напишите в чат
  ### **+** если все хорошо
  ### **–** если есть проблемы cо звуком или с видео
]

---

# Цель занятия 

.right-image[
![](tmp/gopher.png)
]


- Научиться писать бенчмарки

---

# Перед тем как начать?

.right-image[
![](tmp/gopher.png)
]

### Какие инструменты профилирования вы уже используете?

---

# Бенчмаркинг

---

# Преаллокация slices и map

---

# Переиспользование объектов

---

# strconv vs fmt

---

# strings vs regex

---

# StringBuilder

---

# sync.Pool

---

# Структуры с указателями как часть map

---

# Кодогенерация vs рефлексия

Вспоминаем easyjson

---

# Переиспользование HTTP-соединений

---

# Библиотека fasthttp

---

# pprof - работаем с консолью

---

# pprof - svg

---

# pprof - web profiling

---

# flamegraph

---

# Трейсинг

---

# race detector

---

# Системные утилиты

---


# Практика

### Оптимизируем программу

---

# Тест

https://forms.gle/SiDmYTPUU5La3rA88

---


# На занятии

- Научились писать бенчмарки

---

## Вопросы?

---

# Дополнительное чтение

- https://stephen.sh/posts/quick-go-performance-improvements
- https://dave.cheney.net/high-performance-go-workshop/dotgo-paris.html
- https://habr.com/ru/company/badoo/blog/301990/
- https://habr.com/ru/company/badoo/blog/324682/
- https://habr.com/ru/company/mailru/blog/331784/
- https://habr.com/ru/post/443378/

---

# Опрос

Не забудьте заполнить опрос. Ссылка на опрос будет в слаке.

---

class: white
background-image: url(tmp/title.svg)
.top.icon[![otus main](https://drive.google.com/uc?id=18Jw9bQvL3KHfhGWNjqyQ3ihR3fV3tmk8)]

# Спасибо за внимание!